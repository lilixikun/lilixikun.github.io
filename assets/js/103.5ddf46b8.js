(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{455:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"æºç åˆ†ææ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åˆ†ææ€»ç»“"}},[t._v("#")]),t._v(" æºç åˆ†ææ€»ç»“")]),t._v(" "),a("h2",{attrs:{id:"js-module-bundler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-module-bundler"}},[t._v("#")]),t._v(" JS Module Bundler")]),t._v(" "),a("p",[a("strong",[t._v("webpack")]),t._v(" æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª "),a("strong",[t._v("JS Module Bundler")]),t._v(",ç”¨äºå°†å¤šä¸ªä»£ç æ¨¡å—è¿›è¡Œæ‰“åŒ…ã€‚ "),a("strong",[t._v("bundler")]),t._v(" ä»ä¸€ä¸ªæ„å»ºå…¥å£è§¦å‘,è§£æä»£ç ,åˆ†æå‡ºä»£ç æ¨¡å—çš„ä¾èµ–å…³ç³»,ç„¶åå°†ä¾èµ–çš„ä»£ç  æ¨¡å—ç»„åˆåœ¨ä¸€èµ·,åœ¨ bundler ä¸­,æä¾›äº†ä¸€äº›èƒ¶æ°´ä»£ç è®©å¤šä¸ªä»£ç æ¨¡å—å¯ä»¥ååŒå·¥ä½œ,äº’ç›¸å¼•ç”¨ã€‚å¦‚ä¸‹ä¸¾ä¸€äº›ç®€å•çš„ä¾‹å­:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// entry.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./bar.js'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä¾èµ– ./bar.js æ¨¡å—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bar.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./foo.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä¾èµ– ./foo.js æ¨¡å—")]),t._v("\n")])])]),a("p",[t._v("é€’å½’ä¸‹å»,ç›´è‡³æ²¡æœ‰æ›´å¤šçš„ä¾èµ–æ¨¡å—,æœ€ç»ˆå½¢æˆä¸€ä¸ªæ¨¡å—ä¾èµ–æ ‘")]),t._v(" "),a("p",[t._v("åˆ†æå‡ºä¾èµ–å…³ç³»å,webpack ä¼šåˆ©ç”¨ "),a("strong",[t._v("JavaScript Function")]),t._v(" çš„ç‰¹æ€§æä¾›ä¸€äº›ä»£ç æ¥å°†å„ä¸ªæ¨¡å—æ•´åˆåˆ°ä¸€èµ·,å³æ˜¯å°†æ¯ä¸€ä¸ªæ¨¡å—åŒ…è£…æˆä¸€ä¸ª "),a("strong",[t._v("JS Function")]),t._v(",æä¾›ä¸€ä¸ªå¼•ç”¨ä¾èµ–æ¨¡å—çš„æ–¹æ³•,æ¯”å¦‚ "),a("strong",[a("em",[t._v("webpack_require")])]),t._v(",è¿™æ ·åš,å³å¯ä»¥é¿å…å˜é‡äº’ç›¸å¹²æ‰°,åˆèƒ½å¤Ÿæœ‰æ•ˆæ§åˆ¶æ‰§è¡Œé¡ºåº")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†åˆ«å°†å„ä¸ªæ¨¡å—ä¾èµ–çš„ä»£ç ç”¨ modules çš„æ–¹æ³•æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// entry.js")]),t._v("\nmodules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./entry.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_webpack_require_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./bar.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bar")]),t._v("\nmodules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./bar.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_webpack_require_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./foo.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./entry.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å·²ç»æ‰§è¡Œçš„ä»£ç  æ¨¡å—ç»“æœä¼šä¿å­˜åœ¨ installedModules é‡Œé¢")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" installedModules "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("moduleId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æŸ¥ module æ˜¯å¦åœ¨ç¼“å­˜ä¸­")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("installedModules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" installedModules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºä¸€ä¸ª module")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" installedModules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            l"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            exports"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œ module é‡Œé¢çš„æ–¹æ³•")]),t._v("\n        modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®åŠ è½½çŠ¶æ€")]),t._v("\n        module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å› module")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å…·ä½“å¯ä»¥æŸ¥çœ‹ "),a("a",{attrs:{href:"/blog/webpack/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%80"}},[t._v("æºç åˆ†æä¸€")])]),t._v(" "),a("h2",{attrs:{id:"æ„å»ºè¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºè¿‡ç¨‹"}},[t._v("#")]),t._v(" æ„å»ºè¿‡ç¨‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"/webpack/running-process.png",alt:"running-process"}})]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Compiler")]),t._v(" webpack çš„è¿è¡Œå…¥å£, compiler å¯¹è±¡ä»£è¡¨äº†å®Œæ•´çš„ webpack ç¯å¢ƒé…ç½®. è¿™ä¸ªå¯¹è±¡åœ¨å¯åŠ¨ webpack æ—¶è¢«ä¸€æ¬¡æ€§å»ºç«‹,å¹¶é…ç½®å¥½æ‰€æœ‰å¯æ“ä½œçš„è®¾ç½®,åŒ…æ‹¬ "),a("strong",[t._v("options")]),t._v("ã€"),a("strong",[t._v("loader")]),t._v(" å’Œ "),a("strong",[t._v("plugin")]),t._v(". å½“åœ¨ webpack ç¯å¢ƒä¸­åº”ç”¨ä¸€ä¸ªæ’ä»¶æ—¶,æ’ä»¶å°†æ”¶åˆ°æ­¤ compiler å¯¹è±¡çš„å¼•ç”¨,å¯ä»¥ä½¿ç”¨å®ƒæ¥è®¿é—® webpack çš„ä¸»ç¯å¢ƒ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Compilation")]),t._v(" å¯¹è±¡ä»£è¡¨äº†ä¸€æ¬¡èµ„æºç‰ˆæœ¬çš„æ„å»º. å½“è¿è¡Œ webpack å¼€å‘ç¯å¢ƒä¸­é—´ä»¶æ—¶,æ¯å½“æ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å˜åŒ–,å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ compilation,ä»è€Œç”Ÿæˆä¸€ç»„æ–°çš„ç¼–è¯‘èµ„æº. ä¸€ä¸ª compilation å¯¹è±¡è¡¨ç°äº†å½“å‰çš„ æ¨¡å—èµ„æº,ç¼–è¯‘ç”Ÿæˆèµ„æº,å˜åŒ–çš„æ–‡ä»¶,ä»¥åŠè¢«è·Ÿè¸ªä¾èµ–çš„çŠ¶æ€ä¿¡æ¯ã€‚compilation å¯¹è±¡ä¹Ÿæä¾›äº†å¾ˆå¤šå…³é”®æ­¥éª¤çš„å›è°ƒ,ä»¥ä¾›æ’ä»¶åšè‡ªå®šä¹‰å¤„ç†æ—¶é€‰æ‹©ä½¿ç”¨")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Chunk")]),t._v(",å³ç”¨äºè¡¨ç¤º chunk çš„ç±»,å¯¹äºæ„å»ºæ—¶éœ€è¦çš„ chunk å¯¹è±¡ç”± "),a("strong",[t._v("Compilation")]),t._v(" åˆ›å»ºåä¿å­˜ç®¡ç†")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/master/lib/Module.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Module"),a("OutboundLink")],1),t._v(",ç”¨æ¥è¡¨ç¤ºä»£ç æ¨¡å—çš„åŸºç¡€ç±»,è¡ç”Ÿå‡ºå¾ˆå¤šå­ç±»ç”¨äºå¤„ç†ä¸åŒçš„æƒ…å†µ "),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/master/lib/NormalModule.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("NormalModule"),a("OutboundLink")],1),t._v(",å…³äºä»£ç æ¨¡å—çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šå­˜åœ¨ "),a("strong",[t._v("Module")]),t._v(" å®ä¾‹ä¸­,å¦‚ "),a("strong",[t._v("dependencies")]),t._v(" è®°å½•ä»£ç æ¨¡å—çš„ä¾èµ–ç­‰ã€‚å½“ä¸€ä¸ª Module å®ä¾‹è¢«åˆ›å»ºå,æ¯”è¾ƒé‡è¦çš„ä¸€æ­¥å››æ‰§è¡Œ "),a("strong",[t._v("compilation.buildModule")]),t._v(" è¿™ä¸ªæ–¹æ³•,å®ƒä¼šè°ƒç”¨ Module å®ä¾‹çš„build æ–¹æ³•æ¥åˆ›å»º Module å®ä¾‹éœ€è¦çš„ä¸€äº›ä¸œè¥¿,ç„¶åè°ƒç”¨è‡ªèº«çš„ "),a("strong",[t._v("runLoaders")]),t._v(" æ–¹æ³•,æ‰§è¡Œå¯¹äºçš„ "),a("strong",[t._v("loaders")]),t._v(",å°†ä»£ç æºç å†…å®¹ä¸€ä¸€ äº¤ ç”±é…ç½®ä¸­æŒ‡å®šçš„ loader å¤„ç†å,å†æŠŠå¤„ç†çš„ç»“æœ ä¿å­˜èµ·æ¥")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Parser")]),t._v(":åŸºäº "),a("a",{attrs:{href:"https://github.com/acornjs/acorn",target:"_blank",rel:"noopener noreferrer"}},[t._v("acorn"),a("OutboundLink")],1),t._v(" æ¥åˆ†æ "),a("strong",[t._v("AST")]),t._v(" è¯­æ³•æ ‘,è§£æå‡ºä»£ç æ¨¡å—çš„ä¾èµ–")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Dependency")]),t._v(":è§£ææ˜¯ç”¨äºä¿å­˜ä»£ç æ¨¡å—å¯¹åº”çš„ä¾èµ–ä½¿ç”¨çš„å¯¹è±¡ã€‚Module å®ä¾‹ build æ–¹æ³•åœ¨æ‰§è¡Œå®Œå¯¹åº”çš„loaderæ—¶,å¤„ç†å®Œæ¨¡å—å¸¦å•Šè‡ªèº«çš„è½¬æ¢å,ç»§ç»­è°ƒç”¨ "),a("strong",[t._v("Parser")]),t._v(" çš„å®ä¾‹æ¥è§£æè‡ªèº«ä¾èµ–çš„æ¨¡å—,è§£æåçš„ç»“æœå­˜æ”¾åœ¨  "),a("strong",[t._v("module.dependenuies")]),t._v(" ä¸­,é¦–å…ˆä¿å­˜çš„æ˜¯ä¾èµ–çš„è·¯å¾„,åç»­ä¼šç»è¿‡ compilation.processModuleDepencies æ–¹æ³•,å†æ¥å¤„ç†å„ä¸ªä¾èµ–æ¨¡å—,é€’å½’åœ°å»å»ºç«‹ æ•´ä¸ªä¾èµ–")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/master/lib/Template.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Template"),a("OutboundLink")],1),t._v(",ç”Ÿæˆæœ€ç»ˆä»£ç è¦ä½¿ç”¨åˆ°çš„ä»£ç æ¨¡ç‰ˆ,æ‰“åŒ…å®Œçš„ä»£ç å°±æ˜¯ç”¨å¯¹åº”çš„ Template æ¥ç”Ÿæˆ")])])]),t._v(" "),a("h2",{attrs:{id:"ç¼–è¯‘é¡ºåº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘é¡ºåº"}},[t._v("#")]),t._v(" ç¼–è¯‘é¡ºåº")]),t._v(" "),a("p",[t._v("webpackçš„ç¼–è¯‘éƒ½æŒ‰ç…§ä¸‹é¢çš„é’©å­è°ƒç”¨é¡ºåºæ‰§è¡Œ")]),t._v(" "),a("p",[a("img",{attrs:{src:"/webpack/order.png",alt:"order"}})]),t._v(" "),a("h2",{attrs:{id:"ç¼–å†™è‡ªå·±çš„æ’ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™è‡ªå·±çš„æ’ä»¶"}},[t._v("#")]),t._v(" ç¼–å†™è‡ªå·±çš„æ’ä»¶")]),t._v(" "),a("p",[a("strong",[t._v("webpack")]),t._v(" å®ç°æ’ä»¶æœºåˆ¶çš„å¤§ä½“æ–¹å¼å¦‚ä¸‹:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åˆ›å»º")]),t._v(" -- webpack åœ¨å…¶å†…éƒ¨å¯¹è±¡ä¸Šåˆ›å»ºå„ç§é’©å­")]),t._v(" "),a("li",[a("strong",[t._v("æ³¨å†Œ")]),t._v(" -- æ’ä»¶å°†è‡ªå·±çš„æ–¹æ³•æ³¨å†Œåˆ°å¯¹åº”çš„é’©å­ä¸Š,äº¤ç»™ webpack")]),t._v(" "),a("li",[a("strong",[t._v("è°ƒç”¨")]),t._v(" -- webpack ç¼–è¯‘è¿‡ç¨‹ä¸­,ä¼šé€‚æ—¶çš„è§¦å‘ç›¸åº”çš„é’©å­,å› æ­¤ä¹Ÿå°±è§¦å‘äº†æ’ä»¶çš„æ–¹æ³•")])]),t._v(" "),a("p",[t._v("å¦‚ä¸‹ä¸€ä¸ªç®€å•ä¾‹å­ğŸŒ°")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ConsoleLogBuildPlugin'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsoleLogBuildPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ compiler çš„hooksä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•,å½“æ‰§è¡Œåˆ°è¯¥é˜¶æ®µä¼šè°ƒç”¨")]),t._v("\n        compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pluginName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The webpack build process is starting'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConsoleLogBuildPlugin\n")])])]),a("ol",[a("li",[t._v("äº‹ä»¶é’©å­ä¼šæœ‰ä¸åŒçš„ç±»å‹ "),a("strong",[t._v("SyncBailHook")]),t._v(","),a("strong",[t._v("AsyncSeriesHook")]),t._v(","),a("strong",[t._v("SyncHook")]),t._v(" ç­‰")]),t._v(" "),a("li",[t._v("å¦‚æœæ˜¯å¼‚æ­¥äº‹ä»¶é’©å­,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ "),a("strong",[t._v("tapPromise")]),t._v(" æˆ–è€… "),a("strong",[t._v("tapAsync")]),t._v(" æ¥æ³¨å†Œäº‹ä»¶å‡½æ•°,"),a("strong",[t._v("tapPromise")]),t._v(" è¦æ±‚æ–¹æ³•è¿”å› Promise ä»¥ä¾¿å¤„ç†å¼‚æ­¥,è€Œ "),a("strong",[t._v("tapAsync")]),t._v(" åˆ™éœ€è¦ç”¨ callback æ¥è¿”å›ç»“æœ")]),t._v(" "),a("li",[t._v("é™¤äº†åŒæ­¥å’Œå¼‚æ­¥çš„,åç§°å¸¦æœ‰ "),a("strong",[t._v("parallel")]),t._v(" çš„,æ³¨å†Œçš„äº‹ä»¶å‡½æ•°ä¼šå¹¶è¡Œè°ƒç”¨,åç§°å¸¦æœ‰ "),a("strong",[t._v("bail")]),t._v(" çš„,æ³¨å†Œçš„äº‹ä»¶å‡½æ•°ä¼šè¢«é¡ºåºè°ƒç”¨,ç›´è‡³ä¸€ä¸ªå¤„ç†æ–¹æ³•æœ‰è¿”å›å€¼åç§°å¸¦æœ‰ "),a("strong",[t._v("waterfall")]),t._v("çš„,æ¯ä¸ªæ³¨å†Œçš„äº‹ä»¶å‡½æ•°,ä¼šå°†ä¸Šä¸€ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœä½œä¸ºè¾“å…¥å‚æ•°.")])]),t._v(" "),a("p",[a("font",{attrs:{color:"red"}},[t._v(" å¼‚æ­¥äº‹ä»¶é’©å­")])],1),t._v(" "),a("p",[a("strong",[t._v("tapPromise")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloAsyncPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapPromise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HelloAsyncPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ä¸€ä¸ª Promiseï¼Œåœ¨æˆ‘ä»¬çš„å¼‚æ­¥ä»»åŠ¡å®Œæˆæ—¶ resolveâ€¦â€¦")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å¼‚æ­¥å·¥ä½œå®Œæˆâ€¦â€¦'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" HelloAsyncPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("tapAsync")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloAsyncPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HelloAsyncPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åšä¸€äº›å¼‚æ­¥çš„äº‹æƒ…â€¦â€¦")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Done with async work...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" HelloAsyncPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"ç¼–å†™è‡ªå·±çš„loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™è‡ªå·±çš„loader"}},[t._v("#")]),t._v(" ç¼–å†™è‡ªå·±çš„Loader")]),t._v(" "),a("p",[a("strong",[t._v("loader")]),t._v(" ä¼šå°±æ˜¯æ¥æ”¶å­—ç¬¦ä¸²(æˆ–è€…buffer),å†è¿”å›å¤„ç†å®Œçš„å­—ç¬¦ä¸²(æˆ–è€…buffer)çš„è¿‡ç¨‹. webpack ä¼šå°†åŠ è½½çš„èµ„æºä½œä¸ºå‚æ•°ä¼ å…¥ loaderæ–¹æ³•,äº¤ä¸ loader å¤„ç†,å†è¿”å› å¦‚ä¸‹ ç¼–å†™ä¸€ä¸ªç®€å•çš„ loader:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" loaderUtils "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'loader-utils'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°±æ˜¯æ–‡ä»¶å†…å®¹")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–loaderé…ç½®")]),t._v("\n    onst loaderOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" loaderUtils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xikun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myloader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨è½¬æ¢æ­¥éª¤æ˜¯å¼‚æ­¥æ—¶,å¯ä»¥è¿™æ ·")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘Šè¯‰ Webpack æœ¬æ¬¡è½¬æ¢æ˜¯å¼‚æ­¥çš„ï¼ŒLoader ä¼šåœ¨ callback ä¸­å›è°ƒç»“æœ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("async")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceMaps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ast")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ callback è¿”å›å¼‚æ­¥æ‰§è¡Œåçš„ç»“æœ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceMaps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å¤„ç†äºŒè¿›åˆ¶æ•°æ®")]),t._v("\nWebpackä¼ ç»™Loaderçš„åŸå†…å®¹éƒ½æ˜¯UTF-8æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ã€‚ ä½†æœ‰äº›åœºæ™¯ä¸‹Loaderä¸æ˜¯å¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚file-loaderï¼Œå°±éœ€è¦Webpackç»™Loaderä¼ å…¥äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ exports.raw === true æ—¶ï¼ŒWebpack ä¼ ç»™ Loader çš„ source æ˜¯ Buffer ç±»å‹çš„")]),t._v("\n    source "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Buffer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Loader è¿”å›çš„ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ Buffer ç±»å‹çš„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ exports.raw !== true æ—¶ï¼ŒLoader ä¹Ÿå¯ä»¥è¿”å› Buffer ç±»å‹çš„ç»“æœ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ exports.raw å±æ€§å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ® ")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("raw "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);